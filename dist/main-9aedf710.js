function t(t){return t.hasAttribute("hidden")||t.hasAttribute("aria-hidden")&&"false"!==t.getAttribute("aria-hidden")||"none"===t.style.display||"0"===t.style.opacity||"hidden"===t.style.visibility||"collapse"===t.style.visibility}function e(e){return"-1"!==e.getAttribute("tabindex")&&!t(e)&&!function(t){return t.hasAttribute("disabled")||t.hasAttribute("aria-disabled")&&"false"!==t.getAttribute("aria-disabled")}(e)&&(e.hasAttribute("tabindex")||(e instanceof HTMLAnchorElement||e instanceof HTMLAreaElement)&&e.hasAttribute("href")||e instanceof HTMLButtonElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement||e instanceof HTMLIFrameElement)}let s=new Map;const i=document.createElement("template");i.innerHTML='\n\t<div id="start"></div>\n\t<slot></slot>\n\t<div id="backup"></div>\n\t<div id="end"></div>\n';class n extends HTMLElement{constructor(){super(),this.debounceId=Math.random().toString(),this._focused=!1,this.attachShadow({mode:"open"}).appendChild(i.content.cloneNode(!0)),this.focusLastElement=this.focusLastElement.bind(this),this.focusFirstElement=this.focusFirstElement.bind(this),this.onFocusIn=this.onFocusIn.bind(this),this.onFocusOut=this.onFocusOut.bind(this)}static get observedAttributes(){return["inactive"]}get inactive(){return this.hasAttribute("inactive")}set inactive(t){t?this.setAttribute("inactive",""):this.removeAttribute("inactive")}get focused(){return this._focused}connectedCallback(){this.$backup=this.shadowRoot.querySelector("#backup"),this.$start=this.shadowRoot.querySelector("#start"),this.$end=this.shadowRoot.querySelector("#end"),this.$start.addEventListener("focus",this.focusLastElement),this.$end.addEventListener("focus",this.focusFirstElement),this.addEventListener("focusin",this.onFocusIn),this.addEventListener("focusout",this.onFocusOut),this.render()}disconnectedCallback(){this.$start.removeEventListener("focus",this.focusLastElement),this.$end.removeEventListener("focus",this.focusFirstElement),this.removeEventListener("focusin",this.onFocusIn),this.removeEventListener("focusout",this.onFocusOut)}attributeChangedCallback(){this.render()}focusFirstElement(){this.trapFocus()}focusLastElement(){this.trapFocus(!0)}getFocusableElements(){return function t(e,s,i,n=20,o=0){let u=[];if(o>=n)return u;const c=e=>{const u=e.assignedNodes().filter(t=>1===t.nodeType);return u.length>0?t(u[0].parentElement,s,i,n,o+1):[]},r=Array.from(e.children||[]);for(const e of r)s(e)||(i(e)&&u.push(e),null!=e.shadowRoot?u.push(...t(e.shadowRoot,s,i,n,o+1)):"SLOT"===e.tagName?u.push(...c(e)):u.push(...t(e,s,i,n,o+1)));return u}(this,t,e)}trapFocus(t){if(this.inactive)return;let e=this.getFocusableElements();e.length>0?(t?e[e.length-1].focus():e[0].focus(),this.$backup.setAttribute("tabindex","-1")):(this.$backup.setAttribute("tabindex","0"),this.$backup.focus())}onFocusIn(){this.updateFocused(!0)}onFocusOut(){this.updateFocused(!1)}updateFocused(t){!function(t,e,i){const n=s.get(i);null!=n&&window.clearTimeout(n),s.set(i,window.setTimeout(()=>{t(),s.delete(i)},e))}(()=>{this.focused!==t&&(this._focused=t,this.render())},0,this.debounceId)}render(){this.isConnected&&(this.$start.setAttribute("tabindex",!this.focused||this.inactive?"-1":"0"),this.$end.setAttribute("tabindex",!this.focused||this.inactive?"-1":"0"),this.focused?this.setAttribute("focused",""):this.removeAttribute("focused"))}}window&&window.customElements&&window.customElements.define("focus-trap",n);
//# sourceMappingURL=main-9aedf710.js.map
